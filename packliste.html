<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ“¦ Packliste â€“ Imkerei Tagesplaner</title>
    <meta name="theme-color" content="#F5A623">
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="shared-styles.css">
    <style>
        body{padding-left:220px;padding-bottom:2rem}
        .container{max-width:800px;margin:0 auto;padding:1rem}

        /* NAV */
        .nav{position:fixed;left:0;top:0;bottom:0;width:220px;background:#FFFBF0;border-right:2px solid rgba(245,166,35,0.12);display:flex;flex-direction:column;padding:0;z-index:50;overflow-y:auto}
        .nav-brand{padding:1.25rem 1rem;border-bottom:2px solid rgba(245,166,35,0.12)}
        .nav-section{font-size:.65rem;font-weight:700;color:#A69580;text-transform:uppercase;letter-spacing:.08em;padding:.75rem 1rem .25rem}
        .nav-item{display:block;padding:.625rem 1rem;text-align:left;cursor:pointer;border:none;background:none;color:#7A6652;font-size:.85rem;border-left:4px solid transparent;transition:all .15s;width:100%;text-decoration:none}
        .nav-item:hover{background:rgba(245,166,35,0.06)}
        .nav-item.active{color:#92400E;font-weight:600;border-left-color:#F5A623;background:#FFF8EE}

        /* PACKLISTE */
        .pack-kategorie{background:#fff;border:2px solid #E8DFD4;border-radius:.75rem;padding:1rem;margin-bottom:1rem}
        .pack-item-row{display:flex;justify-content:space-between;align-items:center;padding:.625rem;border-bottom:1px solid #FFFBF0;gap:.75rem}
        .pack-item-row:hover{background:#FFF8EE}
        .pack-item-row:last-child{border-bottom:none}
        .pack-item-main{display:flex;align-items:center;flex:1;min-width:0}
        .pack-item-controls{display:flex;align-items:center;gap:.5rem;flex-shrink:0}
        .pack-checkbox{width:1.25rem;height:1.25rem;margin-right:.875rem;cursor:pointer;accent-color:#F5A623;flex-shrink:0}
        .pack-label{flex:1;font-size:.95rem;color:#1C1410;user-select:none;cursor:pointer;min-width:0;word-break:break-word}
        .pack-label.checked{text-decoration:line-through;color:#A69580}
        .pack-label strong{color:#F5A623;font-weight:700}
        .menge-counter{display:flex;align-items:center;gap:.25rem;background:#FFF8EE;border-radius:.5rem;padding:.25rem}
        .menge-btn{width:1.75rem;height:1.75rem;border:1px solid #d1d5db;border-radius:.375rem;background:#fff;cursor:pointer;font-size:1rem;font-weight:bold;display:flex;align-items:center;justify-content:center;transition:all .15s;color:#7A6652}
        .menge-btn:hover{background:#F5A623;border-color:#F5A623;color:#1C1410;transform:scale(1.1)}
        .menge-btn:active{transform:scale(.95)}
        .menge-value{min-width:1.5rem;text-align:center;font-weight:600;font-size:.9rem;color:#1C1410}
        .btn-del{background:none;border:none;cursor:pointer;font-size:1.25rem;padding:.25rem .5rem;opacity:.4;transition:all .2s}
        .btn-del:hover{opacity:1;transform:scale(1.2)}
        .stats{display:flex;gap:1rem;margin-bottom:1.5rem}
        .stat-card{flex:1;background:#FFF8EE;padding:1rem;border-radius:.5rem;text-align:center}
        .stat-number{font-size:1.75rem;font-weight:bold;color:#F5A623}
        .stat-label{font-size:.75rem;color:#7A6652;margin-top:.25rem;text-transform:uppercase;letter-spacing:.05em}
        .schnell-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:.75rem;margin-bottom:1.5rem}
        .schnell-btn{background:linear-gradient(135deg,#F5A623,#FFBE45);border:none;border-radius:.75rem;padding:1rem;cursor:pointer;transition:all .2s;box-shadow:0 2px 4px rgba(28,20,16,0.08)}
        .schnell-btn:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 6px 12px rgba(245,166,35,.3)}
        .schnell-btn:active{transform:translateY(-1px)}
        .schnell-btn.schnell-equipment{background:linear-gradient(135deg,#3b82f6,#60a5fa)}
        .schnell-btn.schnell-equipment:hover{box-shadow:0 6px 12px rgba(59,130,246,.3)}
        .schnell-icon{font-size:2.5rem;margin-bottom:.5rem}
        .schnell-label{font-weight:600;font-size:.9rem;color:#1C1410}
        .schnell-btn.schnell-equipment .schnell-label{color:#fff}
        .info-box{font-size:.85rem;color:#7A6652;padding:.75rem;background:#FFF8EE;border:2px solid #F0D9A0;border-radius:.5rem;margin-bottom:1rem}

        /* TOAST */
        .toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%);background:#1C1410;color:#fff;padding:.75rem 1.5rem;border-radius:999px;font-size:.85rem;z-index:9999;display:none;animation:fadeIn .3s}
        .toast.show{display:block}
        .toast.success{background:#2D8A4E}
        .toast.info{background:#3B82F6}
        @keyframes fadeIn{from{opacity:0;transform:translateX(-50%) translateY(10px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

        .loading-screen{position:fixed;inset:0;background:#FFFBF0;display:flex;align-items:center;justify-content:center;z-index:9999;flex-direction:column;gap:1rem}
        .spinner{width:40px;height:40px;border:4px solid #E8DFD4;border-top-color:#F5A623;border-radius:50%;animation:spin .8s linear infinite}
        @keyframes spin{to{transform:rotate(360deg)}}

        @media(max-width:768px){
            body{padding-left:0;padding-bottom:90px}
            .nav{left:0;right:0;top:auto;bottom:0;width:100%;height:auto;flex-direction:row;border-right:none;border-top:2px solid rgba(245,166,35,0.12);overflow-x:auto;overflow-y:hidden}
            .nav-brand,.nav-section{display:none}
            .nav-item{flex:0 0 auto;padding:.5rem .6rem;font-size:.6rem;text-align:center;border-left:none;border-bottom:3px solid transparent;white-space:nowrap}
            .nav-item.active{border-left:none;border-bottom-color:#F5A623}
            .schnell-grid{grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:.5rem}
            .schnell-btn{padding:.75rem}
            .schnell-icon{font-size:1.75rem}
            .schnell-label{font-size:.8rem}
        }
    </style>
</head>
<body>

<nav class="nav" id="mainNav"></nav>
<script src="https://unpkg.com/lucide@latest"></script>
<script src="nav.js"></script>

<div class="loading-screen" id="loadingScreen">
    <div class="spinner"></div>
    <div style="color:#7A6652;font-size:.85rem">Packliste laden...</div>
</div>

<div class="toast" id="toast"></div>
<div id="app"></div>

<script src="config.js"></script>
<script>
// ============================================
// PACKLISTE - EIGENSTÃ„NDIGE SEITE
// ============================================

const PACKLISTE_ITEMS = {
    'Schutzkleidung': ['Imkeranzug / Imkerjacke','Imkerhandschuhe','Imkerhut mit Schleier','Feste Schuhe / Stiefel'],
    'Werkzeuge': ['StockmeiÃŸel','Smoker (Raucher)','Abkehrbesen','Wabenzange','Entdeckelungsgabel','Stockkarte & Stift','Messer / Entdeckelungsmesser'],
    'Rauchmaterial': ['HolzspÃ¤ne / Holzpellets','Heu / Stroh','Karton / Eierkarton','AnzÃ¼nder','Feuerzeug / StreichhÃ¶lzer'],
    'Futter': ['Futterteig (Apifonda)','Zuckerwasser','Futtertaschen','Futterzarge'],
    'Behandlung': ['AmeisensÃ¤ure','OxalsÃ¤ure','Puderzucker (fÃ¼r Diagnose)','Diagnosebrett / Windel','Schutzhandschuhe fÃ¼r SÃ¤ure','Dosierer / Verdampfer'],
    'Material': ['RÃ¤hmchen','MittelwÃ¤nde','Absperrgitter','Fluglochkeil','MÃ¤usegitter','Draht zum EinlÃ¶ten'],
    'Ernte': ['Honigschleuder','Entdeckelungsgeschirr','Sieb (doppelt)','Honigeimer / Hobbock','Honigrefraktometer','GlÃ¤ser & Deckel','Etiketten'],
    'Beuten & Zargen': ['Boden / Bodenbrett','Brutraum(zarge)','Honigraum(zarge)','Absperrgitter','Innendeckel','AuÃŸendeckel / Blechdeckel'],
    'Sonstiges': ['Erste-Hilfe-Set','Wasser / GetrÃ¤nk','Transportbox / Kiste','MÃ¼llsack','Desinfektionsmittel','Handy / Kamera']
};

var items = [];
var schnellCounter = {};

// ============================================
// INIT
// ============================================
async function init() {
    var { data: { session } } = await sb.auth.getSession();
    if (!session) { window.location.href = 'index.html'; return; }
    currentUser = session.user;

    var res = await sb.from('packliste').select('*').eq('user_id', currentUser.id);
    items = (res.data || []).map(function(r) {
        return { id: r.id, kategorie: r.kategorie, name: r.name, checked: r.checked, menge: r.menge, istSchnell: r.ist_schnell, schnellTyp: r.schnell_typ };
    });

    if (items.length === 0) {
        await erstelleNeueItems();
    }

    document.getElementById('loadingScreen').style.display = 'none';
    render();
}

// ============================================
// HELPERS
// ============================================
function toast(msg, type) {
    type = type || 'success';
    var el = document.getElementById('toast');
    el.textContent = msg;
    el.className = 'toast ' + type + ' show';
    clearTimeout(window._toastTimer);
    window._toastTimer = setTimeout(function(){ el.classList.remove('show'); }, 2500);
}

// ============================================
// DATEN-FUNKTIONEN
// ============================================
async function erstelleNeueItems() {
    items = [];
    schnellCounter = {};
    Object.entries(PACKLISTE_ITEMS).forEach(function(entry) {
        var kategorie = entry[0]; var names = entry[1];
        names.forEach(function(name) {
            items.push({
                id: 'pack_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                kategorie: kategorie, name: name, checked: false, istSchnell: false
            });
        });
    });
    speichern();
}

function speichern() {
    if (!currentUser) return;
    var rows = items.map(function(item){
        return {
            id: item.id, user_id: currentUser.id,
            kategorie: item.kategorie, name: item.name,
            checked: item.checked || false, menge: item.menge || 1,
            ist_schnell: item.istSchnell || false, schnell_typ: item.schnellTyp || null
        };
    });
    if (rows.length > 0) {
        sb.from('packliste').upsert(rows).then(function(res){
            if (res.error) console.error('Packliste Speichern Fehler:', res.error);
        });
    }
}

function toggle(id) {
    var item = items.find(function(i){return i.id === id;});
    if (item) {
        item.checked = !item.checked;
        var row = {
            id: item.id, user_id: currentUser.id,
            kategorie: item.kategorie, name: item.name,
            checked: item.checked, menge: item.menge || 1,
            ist_schnell: item.istSchnell || false, schnell_typ: item.schnellTyp || null
        };
        sb.from('packliste').upsert(row);
        render();
    }
}

function changeMenge(id, delta) {
    var item = items.find(function(i){return i.id === id;});
    if (item) {
        if (!item.menge) item.menge = 1;
        item.menge = Math.max(1, item.menge + delta);
        db.update('packliste', {menge: item.menge}, id);
        render();
    }
}

function loescheItem(id) {
    items = items.filter(function(i){return i.id !== id;});
    sb.from('packliste').delete().eq('id', id);
    render();
    toast('ğŸ—‘ï¸ GelÃ¶scht','info');
}

function alleAbhaken() { items.forEach(function(item){item.checked = true; db.update('packliste', {checked: true}, item.id);}); render(); }
function alleZuruecksetzen() { items.forEach(function(item){item.checked = false; db.update('packliste', {checked: false}, item.id);}); render(); }

function allesLoeschen() {
    if (!confirm('Wirklich die KOMPLETTE Packliste lÃ¶schen?')) return;
    items.forEach(function(item){ db.del('packliste', item.id); });
    items = [];
    schnellCounter = {};
    render();
    toast('ğŸ—‘ï¸ Packliste gelÃ¶scht','info');
}

function schnellHinzufuegen(typ) {
    var existierend = items.filter(function(i){return i.schnellTyp === typ;});
    if (existierend.length > 0) {
        items = items.filter(function(i){return i.schnellTyp !== typ;});
        speichern(); render(); toast('âŒ Entfernt','info'); return;
    }
    var sets = {
        'schutz': [['Schutzkleidung','ğŸ§¥ SchutzausrÃ¼stung komplett'],['Schutzkleidung','  â†’ Imkeranzug/Jacke'],['Schutzkleidung','  â†’ Imkerhandschuhe'],['Schutzkleidung','  â†’ Imkerhut mit Schleier']],
        'werkzeug': [['Werkzeuge','ğŸ”§ Werkzeug-Set komplett'],['Werkzeuge','  â†’ StockmeiÃŸel'],['Werkzeuge','  â†’ Abkehrbesen'],['Werkzeuge','  â†’ Wabenzange']],
        'smoker': [['Rauchmaterial','ğŸ’¨ Smoker-Paket komplett'],['Werkzeuge','  â†’ Smoker (Raucher)'],['Rauchmaterial','  â†’ HolzspÃ¤ne/Pellets'],['Rauchmaterial','  â†’ AnzÃ¼nder']],
        'ernte': [['Ernte','ğŸ¯ Ernte-Set komplett'],['Ernte','  â†’ Honigschleuder'],['Ernte','  â†’ Entdeckelungsgeschirr'],['Ernte','  â†’ Sieb (doppelt)'],['Ernte','  â†’ Honigeimer'],['Ernte','  â†’ GlÃ¤ser & Deckel']],
        'behandlung_set': [['Behandlung','ğŸ’‰ Behandlungs-Set komplett'],['Behandlung','  â†’ AmeisensÃ¤ure'],['Behandlung','  â†’ OxalsÃ¤ure'],['Behandlung','  â†’ Puderzucker'],['Behandlung','  â†’ Schutzhandschuhe']],
        'futter': [['Futter','ğŸ¯ Futter-Set komplett'],['Futter','  â†’ Futterteig'],['Futter','  â†’ Zuckerwasser'],['Futter','  â†’ Futterzarge']],
        'ableger': [['Material','ğŸ“¦ Ablegerkasten komplett'],['Material','  â†’ Boden'],['Material','  â†’ Brutzarge'],['Material','  â†’ Deckel'],['Material','  â†’ 6 RÃ¤hmchen']],
        'dadant': [['Beuten & Zargen','ğŸ  Dadant Beute komplett'],['Beuten & Zargen','  â†’ Boden'],['Beuten & Zargen','  â†’ Brutraum'],['Beuten & Zargen','  â†’ Honigraum'],['Beuten & Zargen','  â†’ Deckel']],
        'raehmchen': [['Material','ğŸªµ 10x RÃ¤hmchen']],
        'mittelwaende': [['Material','â–­ 10x MittelwÃ¤nde']],
        'boden': [['Beuten & Zargen','â¬œ Boden']],
        'deckel': [['Beuten & Zargen','ğŸ”² Deckel']],
        'zarge': [['Beuten & Zargen','ğŸ“¦ Zarge']]
    };
    var setItems = sets[typ] || [];
    setItems.forEach(function(x) {
        items.push({id:'schnell_'+Date.now()+'_'+Math.random().toString(36).substr(2,9), kategorie:x[0], name:x[1], checked:false, istSchnell:true, schnellTyp:typ});
    });
    speichern(); render(); toast('âœ“ HinzugefÃ¼gt','success');
}

function getStatistik() {
    var abgehakt = items.filter(function(i){return i.checked;}).length;
    return { abgehakt: abgehakt, offen: items.length - abgehakt, gesamt: items.length };
}

// ============================================
// DRUCKEN
// ============================================
function drucken() {
    var grouped = {};
    items.forEach(function(item) {
        if (!grouped[item.kategorie]) grouped[item.kategorie] = [];
        grouped[item.kategorie].push(item);
    });
    var datum = new Date().toLocaleDateString('de-DE',{day:'2-digit',month:'long',year:'numeric'});
    var stats = getStatistik();
    var html = '<!DOCTYPE html><html><head><meta charset="UTF-8"><title>Packliste - Imkerei</title>';
    html += '<style>';
    html += 'body{font-family:Arial,sans-serif;max-width:700px;margin:0 auto;padding:1.5rem;color:#333}';
    html += 'h1{font-size:1.5rem;border-bottom:2px solid #F5A623;padding-bottom:.5rem;margin-bottom:.25rem}';
    html += '.datum{font-size:.85rem;color:#666;margin-bottom:1.5rem}';
    html += '.stats{font-size:.9rem;color:#666;margin-bottom:1rem}';
    html += 'h2{font-size:1.1rem;margin:1.25rem 0 .5rem;color:#1C1410;border-bottom:1px solid #eee;padding-bottom:.25rem}';
    html += '.item{display:flex;align-items:center;gap:.5rem;padding:.3rem 0;border-bottom:1px dotted #ddd}';
    html += '.checkbox{width:14px;height:14px;border:2px solid #999;border-radius:2px;flex-shrink:0}';
    html += '.checkbox.checked{background:#10b981;border-color:#10b981}';
    html += '.name{flex:1;font-size:.9rem}';
    html += '.checked-text{text-decoration:line-through;color:#999}';
    html += '@media print{body{padding:.5rem}}';
    html += '</style></head><body>';
    html += '<h1>ğŸ Imkerei Packliste</h1>';
    html += '<div class="datum">'+datum+'</div>';
    html += '<div class="stats">'+stats.abgehakt+' von '+stats.gesamt+' abgehakt Â· '+stats.offen+' offen</div>';
    Object.entries(grouped).forEach(function(entry){
        var kat = entry[0]; var katItems = entry[1];
        var abgehakt = katItems.filter(function(i){return i.checked;}).length;
        html += '<h2>'+kat+' ('+abgehakt+'/'+katItems.length+')</h2>';
        katItems.forEach(function(item){
            var menge = item.menge || 1;
            html += '<div class="item"><div class="checkbox'+(item.checked?' checked':'')+'"></div>';
            html += '<div class="name'+(item.checked?' checked-text':'')+'">'+(menge>1?menge+'x ':'')+item.name+'</div></div>';
        });
    });
    html += '</body></html>';
    var win = window.open('','_blank');
    win.document.write(html);
    win.document.close();
    setTimeout(function(){ win.print(); }, 300);
}

// ============================================
// RENDER
// ============================================
function render() {
    var stats = getStatistik();
    var grouped = {};
    items.forEach(function(item) {
        if (!grouped[item.kategorie]) grouped[item.kategorie] = [];
        grouped[item.kategorie].push(item);
    });

    var kategorieHtml = '';
    Object.entries(grouped).forEach(function(entry) {
        var kategorie = entry[0]; var katItems = entry[1];
        var abgehakt = katItems.filter(function(i){return i.checked;}).length;
        kategorieHtml += '<div class="pack-kategorie"><h3>'+kategorie+' <small style="color:#7A6652;font-weight:normal">('+abgehakt+'/'+katItems.length+')</small></h3>';
        katItems.forEach(function(item) {
            var menge = item.menge || 1;
            kategorieHtml += '<div class="pack-item-row"><div class="pack-item-main">'+
                '<input type="checkbox" class="pack-checkbox" '+(item.checked?'checked':'')+' onchange="toggle(\''+item.id+'\')">'+
                '<span class="pack-label '+(item.checked?'checked':'')+'" onclick="toggle(\''+item.id+'\')">'+(menge>1?'<strong>'+menge+'x</strong> ':'')+item.name+'</span>'+
                '</div><div class="pack-item-controls">'+
                '<div class="menge-counter"><button class="menge-btn" onclick="changeMenge(\''+item.id+'\',-1)">âˆ’</button><span class="menge-value">'+menge+'</span><button class="menge-btn" onclick="changeMenge(\''+item.id+'\',1)">+</button></div>'+
                '<button class="btn-del" onclick="loescheItem(\''+item.id+'\')">ğŸ—‘ï¸</button>'+
                '</div></div>';
        });
        kategorieHtml += '</div>';
    });

    var html = '<div class="container">'+
    '<h1 style="margin:0 0 .75rem">ğŸ“‹ Imkerei Packliste</h1>'+
    '<div class="info-box">âœ¨ <strong>VollstÃ¤ndige Packliste</strong> - einfach abhaken! Schnell-Buttons fÃ¼gen ganze Sets hinzu.</div>'+
    '<h2 style="margin-top:0">âš¡ Schnell hinzufÃ¼gen</h2>'+
    '<h3 style="font-size:.9rem;color:#7A6652;margin-bottom:.75rem">ğŸ  Beuten & Material</h3>'+
    '<div class="schnell-grid">'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'ableger\')"><div class="schnell-icon">ğŸ“¦</div><div class="schnell-label">Ablegerkasten</div></button>'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'dadant\')"><div class="schnell-icon">ğŸ </div><div class="schnell-label">Dadant Beute</div></button>'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'raehmchen\')"><div class="schnell-icon">ğŸªµ</div><div class="schnell-label">10 RÃ¤hmchen</div></button>'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'mittelwaende\')"><div class="schnell-icon">â–­</div><div class="schnell-label">10 MittelwÃ¤nde</div></button>'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'boden\')"><div class="schnell-icon">â¬œ</div><div class="schnell-label">Boden</div></button>'+
    '<button class="schnell-btn" onclick="schnellHinzufuegen(\'zarge\')"><div class="schnell-icon">ğŸ“¦</div><div class="schnell-label">Zarge</div></button>'+
    '</div>'+
    '<h3 style="font-size:.9rem;color:#7A6652;margin:.75rem 0">ğŸ”§ Arbeits-Equipment</h3>'+
    '<div class="schnell-grid">'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'schutz\')"><div class="schnell-icon">ğŸ§¥</div><div class="schnell-label">SchutzausrÃ¼stung</div></button>'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'werkzeug\')"><div class="schnell-icon">ğŸ”§</div><div class="schnell-label">Werkzeug-Set</div></button>'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'smoker\')"><div class="schnell-icon">ğŸ’¨</div><div class="schnell-label">Smoker-Paket</div></button>'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'ernte\')"><div class="schnell-icon">ğŸ¯</div><div class="schnell-label">Ernte-Set</div></button>'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'behandlung_set\')"><div class="schnell-icon">ğŸ’‰</div><div class="schnell-label">Behandlungs-Set</div></button>'+
    '<button class="schnell-btn schnell-equipment" onclick="schnellHinzufuegen(\'futter\')"><div class="schnell-icon">ğŸ¯</div><div class="schnell-label">Futter-Set</div></button>'+
    '</div>'+
    '<div style="display:flex;gap:.75rem;margin-bottom:1.5rem">'+
    '<button style="flex:1;padding:.6rem;background:#10b981;color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer" onclick="alleAbhaken()">âœ“ Alle abhaken</button>'+
    '<button style="flex:1;padding:.6rem;background:#3b82f6;color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer" onclick="alleZuruecksetzen()">â†º ZurÃ¼cksetzen</button>'+
    '<button style="flex:1;padding:.6rem;background:#ef4444;color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer" onclick="allesLoeschen()">ğŸ—‘ï¸ Alles lÃ¶schen</button>'+
    '</div>'+
    '<div style="margin-bottom:1.5rem">'+
    '<button style="width:100%;padding:.75rem;background:#F5A623;color:#fff;border:none;border-radius:.5rem;font-weight:600;cursor:pointer;font-size:1rem" onclick="drucken()">ğŸ–¨ï¸ Packliste drucken</button>'+
    '</div>'+
    '<div class="stats">'+
    '<div class="stat-card"><div class="stat-number">'+stats.abgehakt+'</div><div class="stat-label">Abgehakt</div></div>'+
    '<div class="stat-card"><div class="stat-number">'+stats.offen+'</div><div class="stat-label">Offen</div></div>'+
    '<div class="stat-card"><div class="stat-number">'+stats.gesamt+'</div><div class="stat-label">Gesamt</div></div>'+
    '</div>'+
    kategorieHtml+
    '</div>';

    document.getElementById('app').innerHTML = html;
}

// ============================================
// START
// ============================================
init();
</script>
</body>
</html>
